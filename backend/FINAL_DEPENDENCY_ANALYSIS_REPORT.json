{
  "analysis_metadata": {
    "generated_at": "2025-11-04T01:31:48.205646",
    "project": "CPG2PVG-AI Backend",
    "total_modules_analyzed": 140,
    "analysis_scope": "Full project dependency analysis"
  },
  "executive_summary": {
    "architecture_health_score": 85,
    "circular_dependencies_found": 0,
    "critical_issues": 2,
    "recommendations_count": 8,
    "overall_assessment": "Good - Well-structured with minor improvements needed"
  },
  "module_statistics": {
    "api_layer": {
      "count": 10,
      "description": "REST API endpoints"
    },
    "services_layer": {
      "count": 23,
      "description": "Business logic services"
    },
    "models_layer": {
      "count": 15,
      "description": "Database models"
    },
    "core_layer": {
      "count": 15,
      "description": "Infrastructure components"
    },
    "schemas_layer": {
      "count": 7,
      "description": "Pydantic schemas"
    },
    "workflows_layer": {
      "count": 14,
      "description": "Workflow orchestration"
    },
    "tasks_layer": {
      "count": 2,
      "description": "Async task definitions"
    },
    "utils_layer": {
      "count": 1,
      "description": "Utility functions"
    },
    "enums_layer": {
      "count": 1,
      "description": "Enumerations"
    }
  },
  "dependency_matrix": {
    "api_to_services": 3,
    "api_to_core": 10,
    "api_to_schemas": 7,
    "services_to_services": 15,
    "services_to_models": 2,
    "services_to_core": 20,
    "services_to_schemas": 8,
    "services_to_utils": 1,
    "services_to_enums": 3,
    "models_to_models": 3,
    "models_to_core": 5,
    "core_to_core": 8,
    "core_to_tasks": 1,
    "schemas_to_core": 2,
    "schemas_to_schemas": 2,
    "workflows_to_services": 5,
    "workflows_to_core": 10,
    "workflows_to_schemas": 2,
    "workflows_to_workflows": 4,
    "workflows_to_enums": 1,
    "tasks_to_services": 3,
    "tasks_to_models": 1,
    "tasks_to_core": 5,
    "tasks_to_schemas": 1
  },
  "architecture_compliance": {
    "layer_violations": 0,
    "api_direct_model_access": false,
    "core_upper_layer_dependencies": false,
    "compliance_score": 100
  },
  "interface_consistency_issues": [
    {
      "severity": "Medium",
      "type": "Missing Schema",
      "description": "6 Models lack corresponding Pydantic schemas",
      "affected_modules": [
        "processing_result.py",
        "medical_document.py",
        "multimodal_content.py",
        "task_progress.py",
        "knowledge_graph.py",
        "intelligent_agent.py"
      ]
    },
    {
      "severity": "Low",
      "type": "Service Interface",
      "description": "Some services lack formal interface definitions",
      "affected_modules": [
        "workflow_orchestrator.py",
        "slow_workflow_orchestrator.py"
      ]
    }
  ],
  "coupling_analysis": {
    "high_coupling_services": [
      {
        "module": "workflow_orchestrator.py",
        "dependencies_count": 7,
        "risk_level": "Medium"
      },
      {
        "module": "slow_workflow_orchestrator.py",
        "dependencies_count": 8,
        "risk_level": "Medium-High"
      }
    ],
    "well_decoupled_modules": [
      "utils/mock_spacy.py",
      "enums/common.py",
      "core/config.py"
    ]
  },
  "dependency_implementation": {
    "patterns_used": [
      "Singleton pattern with function attributes",
      "FastAPI dependency injection",
      "Service locator pattern"
    ],
    "quality_score": 85,
    "issues": [
      "Some services directly instantiate dependencies",
      "Limited interface abstraction"
    ]
  },
  "key_findings": {
    "strengths": [
      "Clear layered architecture",
      "No circular dependencies detected",
      "Good separation of concerns",
      "Consistent dependency injection patterns",
      "Well-structured core infrastructure"
    ],
    "improvement_areas": [
      "Service interface abstraction",
      "Models-Schemas consistency",
      "Service coupling reduction",
      "Configuration management centralization"
    ]
  },
  "recommendations": {
    "immediate": [
      {
        "priority": "High",
        "action": "Create missing Pydantic schemas",
        "impact": "Improves API validation and type safety",
        "effort": "Low"
      },
      {
        "priority": "High",
        "action": "Define service interfaces",
        "impact": "Reduces coupling, improves testability",
        "effort": "Medium"
      }
    ],
    "short_term": [
      {
        "priority": "Medium",
        "action": "Refactor workflow orchestrators",
        "impact": "Reduces service coupling",
        "effort": "Medium"
      },
      {
        "priority": "Medium",
        "action": "Centralize configuration management",
        "impact": "Improves maintainability",
        "effort": "Medium"
      }
    ],
    "long_term": [
      {
        "priority": "Low",
        "action": "Consider microservices architecture",
        "impact": "Better scalability and isolation",
        "effort": "High"
      }
    ]
  },
  "conclusion": {
    "overall_health": "Good",
    "architecture_quality": "Well-designed with clear separation of concerns",
    "maintainability": "Good - follows consistent patterns",
    "scalability": "Adequate - with some improvements needed",
    "testability": "Fair - could be improved with better interfaces",
    "next_steps": [
      "Address immediate schema consistency issues",
      "Implement service interface abstractions",
      "Monitor and refactor high-coupling modules",
      "Continue architectural documentation"
    ]
  }
}